@page "/"

@using RentOfWorkshopsCore.DBConnection
@using RentOfWorkshopsCore.DBContext
@using RentOfWorkshopsWEB.Shared.Space
@using RentOfWorkshopsWEB.Shared.SearhBar

@inject SpaceListFilter SpaceFilter

<SearchBarComponent/>
<SpacesCollectionComponent Spaces=_spaceList/>

@code{
    private List<Space> _spaceList;

    protected override Task OnInitializedAsync()
    {
        SpaceFilter.UpdateList(_spaceList);
        SpaceFilter.StateChanged += OnStateChange;
        return base.OnInitializedAsync();
    }

    private void OnStateChange()
    {
        InvokeAsync(() => StateHasChanged());
    }
}